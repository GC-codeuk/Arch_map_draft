<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4ykymJ5yCNhWlPIDV0Dr7-0tC57Abuog&region=GB" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>
<!--<script src='//google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/src/richmarker-compiled.js' type='text/javascript'></script>-->
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script>
<link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,700,100' rel='stylesheet' type='text/css'>



<p id="notice"><%= notice %></p>

<h1>Listing Plots</h1>

<table>
  <thead>
    <tr>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Address</th>
      <th>Description</th>
      <th>Title</th>
      <th>Type</th>
      <th>Image</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @plots.each do |plot| %>
      <tr>
        <td><%= plot.latitude %></td>
        <td><%= plot.longitude %></td>
        <td><%= plot.address %></td>
        <td><%= plot.description %></td>
        <td><%= plot.title %></td>
        <td><%= plot.typ %></td>
        <td><%= plot.img_link %></td>
        <td><%= link_to 'Show', plot %></td>
        <td><%= link_to 'Edit', edit_plot_path(plot) %></td>
        <td><%= link_to 'Destroy', plot, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Plot', new_plot_path %>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script type="text/javascript">

    // Map style array settings
  var styles = [
  // Hue of map setting
    {
      stylers: [
        { hue: "#00ffe6" },
        { saturation: -20 }
      ]
    },
   // Simplify road features
    {
      featureType: "road",
      elementType: "geometry",
      stylers: [
        { lightness: 100 },
        { visibility: "simplified" }
      ]
    },
    // Remove street names
    {
      featureType: "road",
      elementType: "labels",
      stylers: [
        { visibility: "off" }
      ]
    },
    {
    "featureType": "water",
    "stylers": [
      { "saturation": -6 },
      { "lightness": -74 },
      { "color": "#2580cb" }
    ]
    },     
  ];

  buildMap(<%=raw @hash.to_json %>);

  //handler = Gmaps.build('Google');
  //handler.buildMap({ provider: {styles: styles}, internal: {id: 'map'}}, function(){
  //  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  //  handler.bounds.extendWith(markers);
  //  handler.fitMapToBounds();
  //});

</script>
